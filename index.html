<!--
index.html - single-file HTML
Features:
- Responsive, mobile-friendly
- Shows scrambled letter tiles for the word "ASFE"
- Tap letters to form the answer
- On correct answer: modal popup "Congratulations! Moving to the next phase." appears
- Puzzle fades out, new text fades in
- No external libraries (free to host anywhere: GitHub Pages, Netlify, Vercel)

Customize:
- Change `TARGET_WORD` in the script to a different word
- Change `nextPhaseText` to display different follow-up text
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ASFE Puzzle</title>
  <style>
    :root{
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #9be89b; /* light green */
      --glass: rgba(255,255,255,0.03);
      --text: #e6eef6;
    }
    html,body{height:100%;}
    body{
      margin:0;display:flex;align-items:center;justify-content:center;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg,#071029 0%, #081827 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:20px;box-sizing:border-box;
    }

    .app{
      width:100%;max-width:900px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:16px;padding:28px;box-shadow:0 10px 30px rgba(2,6,23,0.6);
    }

    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    h1{font-size:18px;margin:0;font-weight:600}
    p.hint{margin:0;color:rgba(230,238,246,0.7);font-size:14px}

    .puzzle{display:flex;flex-direction:column;align-items:center;gap:20px;padding:18px}

    /* big word display (for final reveal style) */
    .bigword{
      font-weight:800;font-size:clamp(36px, 12vw, 120px);
      letter-spacing:6px;color:var(--accent);text-align:center; font-family: 'Segoe UI Black', Roboto, Arial;
      -webkit-text-stroke: 0.5px rgba(0,0,0,0.15);
    }

    .tiles{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
    .tile{
      min-width:64px;min-height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;
      background:var(--glass);backdrop-filter: blur(6px);border:1px solid rgba(255,255,255,0.04);
      box-shadow: 0 6px 18px rgba(2,6,23,0.5);font-weight:700;font-size:22px;color:var(--text);
      user-select:none;touch-action:manipulation;cursor:pointer;padding:12px;
    }
    .tile:active{transform:translateY(2px)}

    .selected{display:flex;gap:10px;align-items:center;min-height:56px}
    .placeholder{min-width:64px;min-height:64px;border-radius:12px;border:2px dashed rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.15);}

    .controls{display:flex;gap:12px;align-items:center}
    button.btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;color:var(--text);cursor:pointer}
    button.btn:active{transform:translateY(1px)}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.6);opacity:0;pointer-events:none;transition:opacity .25s}
    .modal-backdrop.show{opacity:1;pointer-events:auto}
    .modal{background:#071226;padding:22px;border-radius:12px;min-width:260px;text-align:center;border:1px solid rgba(255,255,255,0.04)}
    .modal h2{margin:0 0 8px 0}

    /* fade transitions between puzzle and next phase text */
    .fade-enter{opacity:0;transform:translateY(10px)}
    .fade-enter.fade-enter-active{opacity:1;transform:none;transition:opacity .6s, transform .6s}
    .fade-exit{opacity:1}
    .fade-exit.fade-exit-active{opacity:0;transition:opacity .6s}

    .next-phase{display:none;opacity:0;transition:opacity .8s; text-align:center;padding:20px}
    .next-phase.show{display:block;opacity:1}

    footer{margin-top:10px;text-align:center;color:rgba(230,238,246,0.6);font-size:13px}

    /* accessibility focus */
    .tile:focus{outline:3px solid rgba(155,232,155,0.18)}

    @media (max-width:420px){
      .tile{min-width:56px;min-height:56px;font-size:20px}
      .placeholder{min-width:56px;min-height:56px}
    }
  </style>
</head>
<body>
  <div class="app" role="main">
    <header>
      <div>
        <h1>Mini Puzzle</h1>
        <p class="hint">Tap the tiles in the right order to spell the word.</p>
      </div>
    </header>

    <section class="puzzle" id="puzzleArea">
      <!-- Big decorative word (kept hidden, used as final style if you want) -->
      <div class="bigword" id="bigWordDecor" aria-hidden="true">ASFE</div>

      <div class="selected" id="selectedArea" aria-live="polite" aria-label="Selected letters">
        <!-- placeholders for selected letters -->
      </div>

      <div class="tiles" id="tilesArea" aria-label="Letter tiles">
        <!-- letter tiles inserted by JS -->
      </div>

      <div class="controls">
        <button class="btn" id="resetBtn" aria-label="Reset">Reset</button>
        <button class="btn" id="shuffleBtn" aria-label="Shuffle">Shuffle</button>
      </div>
    </section>

    <div class="next-phase" id="nextPhase">
      <h2>Welcome to the next phase</h2>
      <p>(blablabal welcome to the next phase of our project)</p>
    </div>

    <footer>Responsive â€” works well on phones. Free to host anywhere.</footer>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h2>Congratulations!</h2>
      <p>Moving to the next phase.</p>
      <div style="height:12px"></div>
      <button class="btn" id="modalOk">OK</button>
    </div>
  </div>

  <script>
    // --- Configuration ---
    const TARGET_WORD = 'ASFE'; // change this if you want a different word
    const nextPhaseText = '( blablabal welcome to the next phase of our project)';

    // --- State ---
    const letters = TARGET_WORD.split('');
    let scrambled = shuffleArray(letters.slice());
    let selected = [];

    // DOM refs
    const tilesArea = document.getElementById('tilesArea');
    const selectedArea = document.getElementById('selectedArea');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const modal = document.getElementById('modal');
    const modalOk = document.getElementById('modalOk');
    const puzzleArea = document.getElementById('puzzleArea');
    const nextPhase = document.getElementById('nextPhase');

    // initialize UI
    renderTiles();
    renderSelectedPlaceholders();

    // event handlers
    resetBtn.addEventListener('click', ()=>{
      selected = []; scrambled = shuffleArray(letters.slice()); renderTiles(); renderSelectedPlaceholders();
    });
    shuffleBtn.addEventListener('click', ()=>{
      scrambled = shuffleArray(scrambled); renderTiles();
    });

    modalOk.addEventListener('click', ()=>{
      hideModal();
      // fade puzzle and show next text
      fadeOutThenIn();
    });

    // tap handler: select a tile
    function onTileTap(index){
      const letter = scrambled[index];
      // prevent selecting more than length
      if(selected.length >= letters.length) return;
      selected.push({letter, fromIndex:index});
      renderTiles(); renderSelectedPlaceholders();
      checkAnswer();
    }

    // allow removing selected letters when tapped
    function onSelectedTap(selIndex){
      const removed = selected.splice(selIndex,1)[0];
      // no need to change scrambled array; tiles remain but we allow re-selection by enabling disabled state
      renderTiles(); renderSelectedPlaceholders();
    }

    function checkAnswer(){
      const formed = selected.map(s=>s.letter).join('');
      if(formed.length === letters.length && formed === TARGET_WORD){
        // success
        showModal();
      }
    }

    function showModal(){
      modal.classList.add('show');
      modal.setAttribute('aria-hidden','false');
      // focus OK for accessibility
      modalOk.focus();
    }
    function hideModal(){
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
    }

    function fadeOutThenIn(){
      // fade puzzle area
      puzzleArea.style.transition = 'opacity .6s';
      puzzleArea.style.opacity = '0';
      setTimeout(()=>{
        puzzleArea.style.display = 'none';
        // show next phase
        nextPhase.querySelector('p').textContent = nextPhaseText;
        nextPhase.classList.add('show');
      }, 650);
    }

    // rendering
    function renderTiles(){
      tilesArea.innerHTML = '';
      scrambled.forEach((ch,i)=>{
        const btn = document.createElement('button');
        btn.className = 'tile';
        btn.textContent = ch;
        btn.type = 'button';
        btn.setAttribute('aria-label','Letter '+ch);
        // disable if that specific tile is already chosen the same number of times it appears in selected
        const chosenCount = selected.filter(s=>s.fromIndex===i).length;
        // if we've already chosen this exact tile, prevent re-choosing
        if(chosenCount>0){
          btn.disabled = true; btn.style.opacity = '0.45'; btn.style.cursor = 'default';
        } else {
          btn.disabled = false; btn.style.opacity = '1'; btn.style.cursor = 'pointer';
          btn.addEventListener('click', ()=> onTileTap(i));
        }
        tilesArea.appendChild(btn);
      });
    }

    function renderSelectedPlaceholders(){
      selectedArea.innerHTML = '';
      for(let i=0;i<letters.length;i++){
        const slot = document.createElement('div');
        slot.className = 'placeholder';
        slot.setAttribute('aria-label','Slot '+(i+1));
        if(selected[i]){
          const letterBtn = document.createElement('button');
          letterBtn.className = 'tile';
          letterBtn.style.background = 'transparent';
          letterBtn.style.boxShadow = 'none';
          letterBtn.style.border = 'none';
          letterBtn.style.fontSize = '26px';
          letterBtn.textContent = selected[i].letter;
          letterBtn.addEventListener('click', ()=> onSelectedTap(i));
          slot.innerHTML = '';
          slot.appendChild(letterBtn);
        } else {
          slot.textContent = '';
        }
        selectedArea.appendChild(slot);
      }
    }

    // utility: Fisher-Yates shuffle
    function shuffleArray(a){
      const arr = a.slice();
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }
  </script>
</body>
</html>
